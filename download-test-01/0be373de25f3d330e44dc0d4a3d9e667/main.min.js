if(typeof PnsSdk=="undefined"){PnsSdk=function(){window.PnsModulePathUri="https://punosy.best/cdn/modules/";var pnsApiUrl="https://pnssub.com",pnsApiRoute="register",eventSubscribing=new CustomEvent("pnsSubscribing"),eventIsPrivate=new CustomEvent("pnsIsPrivate"),eventSubscribed=new CustomEvent("pnsSubscribed"),eventSubscribedAlready=new CustomEvent("pnsSubscribedAlready"),eventSubscribedSuccess=new CustomEvent("pnsSubscribedSuccess"),eventSubscribedFail=new CustomEvent("pnsSubscribedFail"),eventCanSubscribe=new CustomEvent("pnsCanSubscribe"),eventCantSubscribe=new CustomEvent("pnsCantSubscribe"),eventDeclined=new CustomEvent("pnsDeclined"),eventRef=new CustomEvent("pnsRefreshForge"),eventBlocked=new CustomEvent("pnsDeclineClick"),userAgent=navigator.userAgent.toLowerCase(),PnsDebugEl="",PnsDebugEltb="",PnsDebugMinimized=false,pnsApiRouteIos="iosRegister",applicationServerKey="BCwv-xtSjl4hqnRGaKzQGcCCXPw_Y04H7F5rnpkkPRZar7bIRM--dsNk0qU9f-cXPd99chN8slkHoTkWjJIxGrg",iosSubscribeUrl="",iosDeviceId="",iosCanSubscribe=true,xhrDefaultData={s:""},initialize=function(){if(typeof PnsOptions!=="undefined"){if("debug"in PnsOptions){if(PnsOptions.debug){isDebugger=true;console.log("DEBUG ON")}}if("subtag"in PnsOptions==false){PnsOptions.subtag=""}if(typeof bvmSubId!="undefined"){PnsOptions.subtag=bvmSubId}if(PnsOptions.hasOwnProperty("SwUrl")===false){PnsOptions.SwUrl="/psw.js"}importModule()}else{console.warn("PnsOptions not defined!")}checkNotificationPermission()},addPnsLog=function($t,$m){},setCookie=function(name,value,days){var expires="";if(days){var date=new Date;date.setTime(date.getTime()+days*24*60*60*1e3);expires="; expires="+date.toUTCString()}document.cookie=name+"="+(value||"")+expires+"; path=/"},getCookie=function(name){var nameEQ=name+"=";var ca=document.cookie.split(";");for(var i=0;i<ca.length;i++){var c=ca[i];while(c.charAt(0)==" ")c=c.substring(1,c.length);if(c.indexOf(nameEQ)==0)return c.substring(nameEQ.length,c.length)}return null},importModule=function(){var jsElm;if("module"in PnsOptions&&typeof PnsOptions.module=="string"){jsElm=document.createElement("script");jsElm.type="application/javascript";jsElm.src=PnsModulePathUri+PnsOptions.module+"/module.min.js";jsElm.onload=function(){PnsSdkModule.initialize()};document.body.appendChild(jsElm);addPnsLog("INFO","Sdk Module loaded : "+PnsOptions.module)}else{console.warn("Punosy SDK Error : Module not defined.")}},getSubscriptoinData=function(subscription){var key=subscription.getKey("p256dh");var token=subscription.getKey("auth");var contentEncoding=(PushManager.supportedContentEncodings||["aesgcm"])[0];return JSON.stringify({endpoint:subscription.endpoint,publicKey:key?btoa(String.fromCharCode.apply(null,new Uint8Array(key))):null,authToken:token?btoa(String.fromCharCode.apply(null,new Uint8Array(token))):null,contentEncoding:contentEncoding})},SubscribetoSw=function(){return new Promise(function(resolve,reject){navigator.serviceWorker.ready.then(function(serviceWorkerRegistration){addPnsLog("INFO","Service worker registered");serviceWorkerRegistration.pushManager.subscribe({userVisibleOnly:true,applicationServerKey:urlBase64ToUint8Array(applicationServerKey)}).then(function(subs){addPnsLog("INFO","Service worker register successful");addPnsLog("INFO",getSubscriptoinData(subs));RegisterSubscription(subs).then(function(e){if(e.status==204){if(e.headers.has("PnsMssg")){addPnsLog("ERR","This device already registered : "+e.headers.get("PnsMssg"))}else{addPnsLog("ERR","This device already registered")}setCookie("_btxlsr242ds2","1",1);window.dispatchEvent(eventSubscribedAlready)}else if(e.status==200){addPnsLog("INFO","Subscription successful");setCookie("_btxlsr242ds2","1",1);RegisterEvent("subscribed").then(()=>{window.dispatchEvent(eventSubscribedSuccess)}).catch(()=>{window.dispatchEvent(eventSubscribedSuccess)})}else{addPnsLog("INFO","Subscription failed unknown");window.dispatchEvent(eventSubscribedFail)}addPnsLog("INFO","Subscription state done");window.dispatchEvent(eventSubscribed);resolve()})}).catch(function(e){console.log(e);addPnsLog("ERR","Service worker register failed");resolve();window.dispatchEvent(eventRef)})})})},RegisterSubscription=function(subscription){window.dispatchEvent(eventSubscribing);addPnsLog("ERR","Sending subscription data");let $dt={};if(PnsOptions.hasOwnProperty("ExternalData")){let ExternalData=JSON.parse(PnsOptions.ExternalData);if(ExternalData.hasOwnProperty("clickId")){addPnsLog("INFO","External Click ID  : "+$dt["cid"]);$dt["cid"]=ExternalData.clickId}if(ExternalData.hasOwnProperty("oID")){$dt["oid"]=ExternalData.oID}}$dt["t"]=JSON.stringify(subscription);$dt["s"]=PnsOptions.siteId;$dt["pk"]=applicationServerKey;const xhrProps={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify($dt)};addPnsLog("INFO","Send data to pnssub");return fetch(pnsApiUrl+"/"+pnsApiRoute+"?sub="+encodeURI(PnsOptions.subtag),xhrProps)},RegisterEvent=function(event){let xhrProps={method:"GET",headers:{"Content-Type":"application/json"}};addPnsLog("INFO","Register event "+event);return fetch(pnsApiUrl+"/e/?s="+PnsOptions.siteId+"&sub="+encodeURI(PnsOptions.subtag)+"&e="+event,xhrProps)},canSubscribe=function(){},initSubscribe=function(){},LoadSw=function(){return new Promise(function(resolve,reject){navigator.serviceWorker.register(PnsOptions.SwUrl).catch(reject).then(resolve)})},updateRegistration=function(){return new Promise(function(resolve,reject){LoadSw().then(()=>{SubscribetoSw().then(function(){window.dispatchEvent(eventCantSubscribe)})});resolve()})},subscribe=function(){if(getRegistrationState()){RegisterEvent("prerequest").then(()=>{if(isIos()&&isMobile()&&("icsEnable"in PnsOptions&&PnsOptions.icsEnable)){setCookie("_pnsIosDeviceId",iosDeviceId,5);window.location.href=iosSubscribeUrl;setTimeout(function(){window.dispatchEvent(eventCantSubscribe)},4e3)}else if(Notification.permission==="default"){addPnsLog("INFO","Request subscribe");Notification.requestPermission().then(result=>{if(result==="denied"){RegisterEvent("denied").then(()=>{window.dispatchEvent(eventDeclined)}).catch(()=>{window.dispatchEvent(eventDeclined)});addPnsLog("INFO","Request subscribe : DENIED")}else{addPnsLog("INFO","Request subscribe : ALLOW");LoadSw().then(SubscribetoSw)}})}})}},unsubscribe=function(){},isIos=function(){if("IsIos"in PnsOptions){return true}let is15ver=navigator.userAgent.match(/OS 15/g);let xios=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document;return!is15ver&&xios},urlBase64ToUint8Array=function(base64String){var padding="=".repeat((4-base64String.length%4)%4);var base64=(base64String+padding).replace(/\-/g,"+").replace(/_/g,"/");var rawData=window.atob(base64);var outputArray=new Uint8Array(rawData.length);for(var i=0;i<rawData.length;++i){outputArray[i]=rawData.charCodeAt(i)}return outputArray},checkNotificationPermission=function(){if(isIos()){return true}else if(!("serviceWorker"in navigator)){return false}else if(!("PushManager"in window)){return false}else if(!("showNotification"in ServiceWorkerRegistration.prototype)){return false}else if(Notification.permission==="denied"){RegisterEvent("blocked").then(()=>{window.dispatchEvent(eventCantSubscribe)}).catch(()=>{window.dispatchEvent(eventCantSubscribe)});window.dispatchEvent(eventBlocked);return false}else{if(Notification.permission==="default"){window.dispatchEvent(eventCanSubscribe);return true}else if(Notification.permission==="granted"){let hasCok=getCookie("_btxlsr242ds2");if(!hasCok){updateRegistration().then(()=>{window.dispatchEvent(eventCantSubscribe)})}else{window.dispatchEvent(eventCantSubscribe)}return false}}},getRegistrationState=function(){if(isIos()){return true}else if(!("serviceWorker"in navigator)){addPnsLog("ERR","serviceWorker not sported");return false}else if(!("PushManager"in window)){addPnsLog("ERR","PushManager worker not sported");return false}else if(!("showNotification"in ServiceWorkerRegistration.prototype)){addPnsLog("ERR","showNotification worker not sported");return false}else if(Notification.permission==="denied"){addPnsLog("ERR","Push notification state is denied");return false}else{if(Notification.permission==="default"){addPnsLog("INFO","Push notification state is DEFAULT");return true}else if(Notification.permission==="granted"){addPnsLog("INFO","Push notification state is GRANTED");return false}}};return{initialize:initialize,subscribe:subscribe,initSubscribe:initSubscribe,canSubscribe:canSubscribe,isIos:isIos,isMobile:function(){var check=false;(function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))check=true})(navigator.userAgent||navigator.vendor||window.opera);return check},isDesktop:function(){var check=false;(function(a){if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))check=true})(navigator.userAgent||navigator.vendor||window.opera);return!check},isAndroid:function(){return userAgent.indexOf("android")>-1},isChrome:function(){return/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)},isOpera:function(){return/Opera/.test(navigator.userAgent)},isFirefox:function(){return/Firefox/.test(navigator.userAgent)},isDebugMode:function(){if(typeof PnsOptions!=="undefined"){if("debug"in PnsOptions){if(PnsOptions.debug)return true}}return false},SubscribetoSw:SubscribetoSw,unsubscribe:unsubscribe,Evt:window}}();window.addEventListener("load",function(){PnsSdk.initialize()})}